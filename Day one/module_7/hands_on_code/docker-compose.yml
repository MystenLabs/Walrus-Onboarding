services:
  sdk-verification:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: sdk-upload-relay-verification
    volumes:
      # Mount source code for live editing
      - ./src:/app/src:ro
      # Mount package.json in case of updates
      - ./package.json:/app/package.json:ro
      # Optional: Mount results directory if you want to persist outputs
      - ./results:/app/results
    working_dir: /app
    # Override command to run tests
    command: npm test
    # Keep container running for interactive use
    stdin_open: true
    tty: true
    environment:
      - NODE_ENV=production
      # Passphrase for keypair derivation - students must set this!
      # Option 1: Set via .env file (copy .env.example to .env and fill in)
      # Option 2: Set via command: docker-compose run -e PASSPHRASE="..." sdk-verification npm test
      # Option 3: Export environment variable: export PASSPHRASE="..." then make test
      - PASSPHRASE=${PASSPHRASE:-}
      # Optional: Other environment variables
      # - SUI_RPC_URL=${SUI_RPC_URL}

