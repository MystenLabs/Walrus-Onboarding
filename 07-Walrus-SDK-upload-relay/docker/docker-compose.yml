services:
  sdk-relay-lab:
    build:
      context: ..
      dockerfile: docker/Dockerfile
    container_name: walrus-sdk-relay-lab
    volumes:
      # Mount source code for live editing
      - ../hands-on-source-code/src:/app/src:ro
      - ../hands-on-source-code/package.json:/app/package.json:ro
      # Mount .env file so container can load secrets via dotenv.
      # Override with ENV_FILE=/path/to/.env (defaults to ../hands-on-source-code/.env)
      - ${ENV_FILE:-../hands-on-source-code/.env}:/app/.env:ro
      # Optional: Mount results directory if you want to persist outputs
      - ./results:/app/results
    working_dir: /app
    stdin_open: true
    tty: true
    environment:
      - NODE_ENV=production
      # PASSPHRASE is loaded from /app/.env (mounted from ../hands-on-source-code/.env)

