flowchart TD
    subgraph Race["âš ï¸ Extension Race Condition"]
        Scenario["ğŸ“‹ Scenario<br/>Current: Epoch 10<br/>Blob end_epoch: 11"]
        Submit["User submits<br/>extend_blob TX"]
        Check{"Who executes<br/>first?"}
        
        Scenario --> Submit --> Check
        
        Check -->|"TX first"| Success["âœ… Extension succeeds"]
        Check -->|"advance_epoch first"| Fail["âŒ EResourceBounds<br/>DATA LOST!"]
    end
    
    Recommend["ğŸ’¡ Always extend with<br/>2-3 epochs buffer!"]
    
    Fail --> Recommend
    
    style Success fill:#b2f2bb,stroke:#2f9e44
    style Fail fill:#ffc9c9,stroke:#f03e3e
    style Recommend fill:#a5d8ff,stroke:#1971c2
